FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS40Cm5hbWU6IGZ1c2Vwcm9tZXRoZXVzLWFwYgpkZXNjcmlwdGlvbjogQVBCIHRv\
IGluc3RhbGwgUHJvbWV0aGV1cyBmb3IgdXNlIGJ5IEZ1c2UKYmluZGFibGU6IEZhbHNlCmFzeW5j\
OiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogUHJvbWV0aGV1cyAoQVBCKQogIGxv\
bmdEZXNjcmlwdGlvbjogQW4gQVBCIHdoaWNoIGRlcGxveXMgUHJvbWV0aGV1cyBmb3IgdXNlIHdp\
dGggRnVzZQogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9tZXRoZXVz\
LwogIGltYWdlVXJsOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWV0aGV1cy9kb2NzL2Jsb2IvbWFz\
dGVyL3N0YXRpYy9wcm9tZXRoZXVzX2xvZ28ucG5nP3Jhdz10cnVlCiAgZGVwZW5kZW5jaWVzOiBb\
ICdkb2NrZXIuaW8vb3BlbnNoaWZ0L3Byb21ldGhldXM6djIuMC4wLWRldicsICdkb2NrZXIuaW8v\
b3BlbnNoaWZ0L29hdXRoLXByb3h5OnYxLjAuMCcgXQogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJS\
ZWQgSGF0LCBJbmMuIgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBU\
aGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIFByb21ldGhldXMgZm9yIHVzZSBieSBGdXNlIGZ1c2Vw\
cm9tZXRoZXVzLWFwYgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0\
ZXJzOiBbXQo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
